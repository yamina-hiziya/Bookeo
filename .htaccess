# Active le module de réécriture d'URL
RewriteEngine On

# Définit le répertoire de base - correspond à ton define('BASE_URL', '/Bookeo/')
RewriteBase /Bookeo/

# Empêche l'accès direct aux fichiers .htaccess et .env
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Ne pas réécrire les requêtes pour les fichiers et dossiers existants (CSS, JS, images)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Règle pour les URLs avec controller et action
# Exemple: /page/about devient ?controller=page&action=about
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ index.php?controller=$1&action=$2 [QSA,L]

# Règle pour les URLs avec seulement le controller
# Exemple: /page devient ?controller=page
RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?controller=$1 [QSA,L]

# Configuration de sécurité
Options -Indexes
ServerSignature Off

# Protection contre les injections XSS
<IfModule mod_headers.c>
    Header set X-XSS-Protection "1; mode=block"
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
</IfModule>

# Configuration PHP
php_flag display_errors On
php_value error_reporting E_ALL
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value session.gc_maxlifetime 3600
